/*	mowbly-4.0.0 09-04-2014	*/
/*	Mowbly - Mobile Applications Framework.	*/
!function(){function a(a,b){a||(a={});for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);this.srcEvent=b,this.returnValue=!0,this.cancelDefaultAction=!1}function b(){this.listeners={}}a.prototype.stopPropagation=function(){},a.prototype.preventDefault=function(){this.returnValue=!1,this.cancelDefaultAction=!0},a.prototype.isCancelled=function(){return!!this.cancelDefaultAction},b.prototype.listenOnce=function(a,b,c){this.addListener(a,b,c,!0)},b.prototype.addListener=b.prototype.bind=function(a,b,c,d){if(this.listeners||(this.listeners={}),b){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=!1);var e=this.listeners[a]||(this.listeners[a]=[]);e[e.length]={handler:b,context:c,listenOnce:d}}},b.prototype.removeListener=b.prototype.unbind=function(a,b,c){if(window.event&&window.event.type===a){var d=this;return void setTimeout(function(){d.removeListener(a,b,c)},0)}if(!this.listeners)return void(this.listeners={});if(b){var e=this.listeners[a];if(e)for(var f=e.length,g=0;f>g;g++)if(e[g].handler==b){e[g]=null,e.splice(g,1);break}}},b.prototype.purgeListeners=function(){this.listeners={}},b.prototype.hasListener=function(a){if(!this.listeners)return this.listeners={},!1;var b=this.listeners[a];return b&&b.length>0},b.prototype.setEventName=function(a,b){a.type=b},b.prototype.fireEvent=function(b,c){if(c instanceof a||("undefined"==typeof c||c._super!=a)&&(c=new a(c)),this.setEventName(c,b),!this.listeners)return this.listeners={},!0;c.context=this;var d=this.listeners[b];if(window.event=c,d)for(var e=d.length,f=0;e>f;f++){var g=d[f];g.handler&&(g.handler.call(g.context,c),g.listenOnce&&(g=null,d.splice(f,1),f--,e--))}return window.event=null,c},b.prototype.fireEventToLastObserver=function(a,b){if(!this.listeners)return void(this.listeners={});var c=this.listeners[a];if(c){var d=c[c.length-1];d.handler&&(d.handler.call(d.context,b),d.listenOnce&&(d=null,c.splice(c.length-1,1)))}return b},window.EventObject=a,window.Observable=b}(window);var __m_Utils={argumentsAsArray:function(a){for(var b=[],c=a.length,d=0;c>d;d++)b.push(a[d]);return b},arrayUnique:function(a,b){for(var c=a.concat(),d=0;d<c.length;++d)for(var e=d+1;e<c.length;++e)b(c[d],c[e])&&c.splice(e--,1);return c},checkRequired:function(a,b,c){if(this.isOfType(b,"undefined"))throw new TypeError("The argument "+a+" is required");this.checkType(a,b,c)},checkType:function(a,b,c){if("undefined"!=typeof c)if(this.isArray(c)){var d=!1;for(var e in c){var f=c[e];if(this.isOfType(b,f)){d=!0;break}}if(!d){var g="The argument "+a+" can be either ";for(var e in c)g=g+c[e]+", ";throw g=g.substring(0,g.length-2),new TypeError(g)}}else if(!this.isOfType(b,c))throw new TypeError("The argument "+a+" should be of type "+c)},extendOptions:function(){var a,b,c=arguments[0]||{},d=1,e=arguments.length;for("object"!=typeof c&&"function"!=typeof c&&(c={});e>d;d++)if(null!=(a=arguments[d]))for(b in a)copy=a[b],c!==copy&&void 0!==copy&&(c[b]=copy);return c},generateGUID:function(){return"urn:uuid:xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},inherit:function(a,b){a="function"==typeof a?a.prototype:a;for(var c in b.prototype)a[c]||(a[c]=b.prototype[c])},isArray:function(a){return a instanceof Array},isInRange:function(a,b,c){return this.checkRequired("number",a,"number"),this.checkRequired("minimum",b,"number"),this.checkRequired("maximum",c,"number"),a>=b&&c>=a},isOfType:function(a,b){return typeof a===b||"undefined"!==b&&"object"==typeof a&&"function"==typeof b&&a instanceof b},search:function(a,b){for(var c in b)if(b.hasOwnProperty(c)&&b[c]&&"function"!=typeof b[c]&&-1!=b[c].search(a))return!0;return!1},extendMethod:function(a,b,c){var d=a[b];a[b]=function(){var a=this._super;this._super=d;var b=c.apply(this,arguments);return void 0===a?delete this._super:this._super=a,b}},inheritPrototype:function(a,b){b.constructor==Function?(a.prototype=new b,a.prototype.constructor=a,a.prototype.parent=b.prototype):(a.prototype=b,a.prototype.constructor=this,a.prototype.parent=b)}};!function(a){function b(){}b.STATUS_ERROR=0,b.STATUS_OK=1,b.onUiReady=function(){b.uiReady=!0,b.Page.fireEvent("ready"),b._pageOpened(b.Page.getContext())},b._onPageLoad=function(d){try{b.uiReady=!1,this.Page.init(d),a.translations=d.translations?d.translations:null,this.language=d.language,c.onPageLoad(d),this.Page.fireEvent(c.getType()),this.Device.orientation=d.orientation,this.Page.fireEvent("load"),b.uiReady||this.onUiReady()}catch(e){if(this.Ui.hideProgress(),this.Page.fireEvent("error",{error:e}),this.Logger.error("Error loading page: "+this.Page.getName()+".\n Reason - "+e),"web"==c.getType())throw e}},b._onDeviceOrientationChange=function(a,d,e,f){c.onDeviceOrientationChange(a,d,e,f);var g=new EventObject({orientation:a,returnValue:d});return b.Device.fireEvent("orientationchange",g),(g.returnValue||c.getType()==c.ANDROID)&&(b.Device.orientation=a),g.returnValue},b._onPageMessage=function(a,c){var d=new EventObject({message:a,sender:c});b.Page.fireEvent("message",d)},b._onPagePause=function(a){var c=new EventObject({isClosing:a});return b.preferences.commit(),b.Page.fireEvent("pause",c)},b._onPageReopen=function(a,c,d){$m.logWarn("_onPageReopen is deprecated. Call mowbly._pageOpened(context) instead");var e={data:a,preferences:c,waitingForResult:d};b._pageOpened(e)},b._pageOpened=function(a){var c=a.data,d=a.waitingForResult;b.preferences.loadFromContext(a);var e=new EventObject;e.hideProgress=!0,b.Page.fireEvent("resume",e);var f=e.hideProgress;"string"==typeof c&&(c=JSON.parse(c)),d?f=b._onPageResult(c,f):(f=b._onPageData(c,f),b.Page.pageParent=c.page),f&&b.Ui.hideProgress()},b._onDeviceBackPressed=function(){var a=new EventObject;try{b.Page.fireEvent("backpress",a),a.isCancelled()||$m.close()}catch(c){$m.logError("Error in backpress - "+JSON.stringify(c)),$m.close()}},b._onPageData=function(c,d){a.scrollTo(0,0);var e=new EventObject(c);return e.hideProgress=d,b.Page.fireEvent("data",e),e.hideProgress},b._onForeground=function(){b.Page.fireEvent("foreground")},b._onBackground=function(){b.preferences.commit(),b.Page.fireEvent("background")},b._onPageResult=function(a,c){var d=new EventObject(a);return d.hideProgress=c,b.Page.fireEvent("result",d),d.hideProgress},b.invoke=function(a,b,d,e){c.invoke(a,b,d,e)},a.getTranslatedLabel=function(b){var c="";return a.translations&&(c=a.translations.labels[b]),c||(c=b),c};var c=function(){function b(a,b){Logger.error(b,a)}function c(){this.callbacks=[]}function d(){}function e(){}function f(){}function g(){}function h(){}function i(a,b){var c=document.createElement("script");c.src=b?a:t+"/js/"+a,document.getElementsByTagName("head")[0].appendChild(c)}function j(){}a.JSON||i("json2.js"),c.prototype.gid=function(){return"urn:uuid:xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},c.prototype.subscribe=function(a){var b=this.gid();return this.callbacks[b]=a,b},c.prototype.unsubscribe=function(a){this.callbacks[a]=null,delete this.callbacks[a]},c.prototype.onreceive=function(a,b){var c=this.callbacks[a];if(b.result&&"string"==typeof b.result)try{b.result=JSON.parse(b.result)}catch(d){}if("undefined"!=typeof c)if("function"==typeof c)c(b);else{var e=c.context,f=c.callback;f&&(e?f.call(e,b):f(e,b))}this.unsubscribe(a)};var k="android",l="blackberry",m="iphone",n="ipad",o="windowsphone",p="web";d.prototype.ANDROID=k,d.prototype.BLACKBERRY=l,d.prototype.IPHONE=m,d.prototype.IPAD=n,d.prototype.WINDOWSPHONE=o,d.prototype.WEB=p,d.prototype.getType=function(){},d.prototype.initialize=function(){},d.prototype.onPageLoad=function(){},d.prototype.onDeviceOrientationChange=function(){},d.prototype.invoke=function(a,b,c,d){var e="";d&&(e=this.CallbackClient.subscribe(d)),FeatureBinder.invoke(a,b,JSON.stringify(c),e)};var q,r=navigator.userAgent.toLowerCase();if(0!=a.location.href.search("http")||r.search(" mowbly/")>-1){{r.split("::")[0].split(" ")[2].split("/")[0]}if(r.search("android")>-1)__m_Utils.inheritPrototype(e,d),e.prototype.getType=function(){return k},q=new e;else if(r.search("blackberry")>-1)__m_Utils.inheritPrototype(f,d),f.prototype.getType=function(){return l},q=new f;else if(r.search("windows phone")>-1)__m_Utils.inheritPrototype(g,d),g.prototype.getType=function(){return o},g.prototype.initialize=function(){var c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",mouseout:"touchcancel",click:"click"};a.onNativeMouseEvent=function(b,d,e){var f=screen.logicalXDPI/screen.deviceXDPI,g=screen.logicalYDPI/screen.deviceYDPI,h=document.createEvent("MouseEvents"),i=document.body.scrollLeft+Math.round(f*d),j=document.body.scrollTop+Math.round(g*e),k=document.elementFromPoint(i,j);h.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,k),h.__m_synth=c[b];var l=k?!k.dispatchEvent(h):!document.dispatchEvent(h);return l?"true":"false"},a.__wp7Plug=function(c){try{c=JSON.parse(c);var d=c.o,e=c.m,f=c.a;if("window"==d)a[e].apply(a,f);else if("mowbly"==d)a.mowbly[e].apply(a.mowbly,f);else{var g=a.mowbly[d];if(g)g[e].apply(g,f);else if("string"==typeof d){for(var h=d.split("."),i=a,j=0;j<h.length;j++)i=i[h[j]];"string"==typeof e&&i[e].apply(i,f)}else b("WindowsBridge","Object mowbly."+d+" not found.")}}catch(k){if("object"==typeof c){var l;l="window"==d?a[e]:"mowbly"==d?a.mowbly[e]:a.mowbly[d][e],b("WindowsBridge","Execution error on method "+(l.name?l.name:"Anonymous")+"\nReason: "+k.message+"\nParameters:\n"+JSON.stringify(c)+"\nMethod:\n"+l)}else b("WindowsBridge","Parse error: "+c+"\nReason: "+k.message)}}},g.prototype.invoke=function(b,c,d,e){var f={};f.feature=b,f.method=c,f.args=d,e&&(f.callbackId=this.CallbackClient.subscribe(e));try{a.external.notify(JSON.stringify(f))}catch(g){a.external.notify("Request parsing error:\n"+b+c+e)}},q=new g;else if(r.search("iphone")>-1||r.search("ipad")>-1){var s=r.search("iphone")>-1?m:n;__m_Utils.inheritPrototype(h,d),h.prototype.getType=function(){return s},h.prototype.initialize=function(){this.xhr=new XMLHttpRequest,this.qCalls=[],this.rId=0,this.notifiedNative=!1},h.prototype.getCalls=function(){var a=JSON.stringify(this.qCalls);return this.notifiedNative=!1,this.qCalls=[],a},h.prototype.invoke=function(a,b,c,d){var e={};e.f=a,e.m=b,e.a=c,e.p=$m.pageName(),d&&(e.callbackId=this.CallbackClient.subscribe(d)),this.qCalls.push(e),this.notifiedNative||(this.notifiedNative=!0,this.xhr.open("GET","mowbly://wake?page="+encodeURIComponent($m.pageName())+"&cid="+encodeURIComponent($m._cid())+"&r="+encodeURIComponent(this.rId),!0),this.rId++,this.xhr.send())},q=new h}}else{var t="../system/libs/mowbly";__m_Utils.inheritPrototype(j,d),j.prototype.getType=function(){return p},j.prototype.initialize=function(){i("../../../app/emulator/simulatorweb.js",!0)},j.prototype.invoke=function(a,b,c,d){var e="";d&&(e=this.CallbackClient.subscribe(d)),FeatureBinder.invoke(a,b,c,e)},q=new j}return q.CallbackClient=new c,q.initialize(),q}();b.Bridge=c;var d="framework",e={launchApplication:function(a,b,e,f){c.invoke(d,"launchApplication",[a,b,e,JSON.parse(f)])},postMessage:function(a,b,e){c.invoke(d,"postMessage",[a,b,e])},Features:{},setPageResult:function(a){c.invoke(d,"setPageResult",[a])},closeApplication:function(a){a||(a=!1),c.invoke(d,"closeApplication",[a])},openExternal:function(a,b){c.invoke(d,"openExternal",[a],b)},isFeatureSupported:function(a,b){if(__m_Utils.checkRequired("callback",b,["object","function"]),$m.isWeb())c.invoke(d,"isFeatureSupported",[a],b);else{var e={code:1,result:{isAllSupported:!0,supported:[],unsupported:[]},error:null};b(e)}},loadResource:function(a,b){__m_Utils.checkRequired("name",a,["string"]),__m_Utils.checkRequired("callback",b,["object","function"]),c.invoke(d,"loadResource",[a],b)}};b.Bridge=c,b.__CallbackClient=c.CallbackClient,a.__mowbly__=b,a.Framework=e,a.mowbly={},b.exportHelperProperty=function(c,d,e){var f;if(e.indexOf(".")>0){var g=e.split("."),h=b;for(var i in g)h=h[g[i]];f=h}else f=b[e];if("undefined"==typeof f)throw new TypeError("Export helper property failed. Feature "+e+" undefined.");var j=f[d];if("undefined"==typeof j)throw new TypeError("Export helper property failed. Property mowbly."+e+"."+d+" undefined.");if("undefined"!=typeof b[c])throw new TypeError("Export helper property failed. Property mowbly."+e+"."+c+" already defined.");a.mowbly[c]=j},b.exportHelperMethod=function(c,d,e){var f;if(e.indexOf(".")>0){var g=e.split("."),h=b;for(var i in g)h=h[g[i]];f=h}else f=b[e];if("undefined"==typeof f)throw new TypeError("Export helper method failed. Feature "+e+" undefined.");var j=f[d];if("function"!=typeof j)throw new TypeError("Export helper method failed. Function mowbly."+e+"."+d+" undefined.");if("undefined"!=typeof b[c])throw new TypeError("Export helper method failed. Function mowbly."+e+"."+c+" already defined.");a.mowbly[c]=function(){return j.apply(b[e],arguments)}},b.exportHelperEvent=function(c,d,e){var f;if(e.indexOf(".")>0){var g=e.split("."),h=b;for(var i in g)h=h[g[i]];f=h}else f=b[e];if("undefined"==typeof f)throw new TypeError("Export helper event failed. Feature "+e+" undefined.");a.mowbly[c]=function(a,b){f.addListener.call(f,d,a,b)}},a.mowbly.loadResource=e.loadResource,a.mowbly.Features=e.Features,a.mowbly.isFeatureSupported=e.isFeatureSupported,b.addFeature=function(c,d,e){c&&(a.mowbly.Features[d]=c),d?b[d]=e:console.log("Unable to add feature")},a.mowbly.onIOS=function(b,c){a.mowbly.onIPhone(b,c),a.mowbly.onIPad(b,c)},a.$m=a.mowbly,a.onerror=function(b,c,d){a.$m.logError(b+"-"+c+"-"+d)}}(window),function(a){function b(a){a||(a={}),this.preferences=a}var c=a.__mowbly__,d=c.Bridge,e="preferences";b.prototype.put=function(a,b){if("undefined"==typeof a)throw new TypeError("Preference key is required");if("undefined"==typeof b)throw new TypeError("Preference value is required");this.preferences[a]=b},b.prototype.get=function(a){return this.preferences[a]},b.prototype.remove=function(a){this.preferences[a]=null,delete this.preferences[a]},b.prototype.loadFromContext=function(a){this.load(a.preferences)},b.prototype.load=function(a){this.preferences=a},b.prototype.toJSON=function(){return this.preferences},b.prototype.commit=function(){var a=JSON.stringify(this.preferences);d.invoke(e,"commit",[a])},b.prototype.removeAll=function(){this.preferences={}},c.addFeature(e,"Preferences",b),c.preferences=new b,c.exportHelperMethod("putPref","put","preferences"),c.exportHelperMethod("getPref","get","preferences"),c.exportHelperMethod("savePref","commit","preferences"),c.exportHelperMethod("removePref","remove","preferences"),c.exportHelperMethod("removeAllPref","removeAll","preferences")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d={window:a,cid:"",pageName:"",pageIcon:"",context:null,init:function(a){this.context=a,this.cid=a.cid,this.pageName=a.pageName,this.pageIcon=a.pageIcon,this.pageParent=a.pageParent,this.data=a.data?JSON.parse(a.data):null,b.Network.connected=a.network,b.preferences.loadFromContext(a)},getCid:function(){return this.cid},getParent:function(){return this.pageParent},getName:function(){return this.pageName},getIcon:function(){return this.pageIcon},getContext:function(){return this.context},DefaultOpenOptions:{showProgress:!0,retainPageInViewStack:!0},getOpenOptions:function(a){return"undefined"==typeof a?a=this.DefaultOpenOptions:("undefined"==typeof a.showProgress&&(a.showProgress=!0),"undefined"==typeof a.retainPageInViewStack&&(a.retainPageInViewStack=!0)),a},getOpenDataObject:function(a){var b={page:this.pageName,data:a};return b},open:function(a,c,d,e){if(__m_Utils.checkRequired("name",a,"string"),__m_Utils.checkRequired("url",c,"string"),!b._onPagePause(!1).isCancelled()){e=this.getOpenOptions(e);var f=this.getOpenDataObject(d,e),g=!1;if(("/"===c.substring(0,1)||"file"===c.substring(0,4)&&"html"===c.substring(c.length-4))&&(g=!0),e.showProgress=e.showProgress&&g,e.showProgress){var h="string"==typeof e.progressMsg&&e.progressMsg?e.progressMsg:"Loading "+a+" ...";b.Ui.showProgress(h,"")}Framework.launchApplication(a,c,JSON.stringify(f),JSON.stringify(e))}},postMessage:function(a,b,c){Framework.postMessage(a,b,c)},setResult:function(a){var b={page:this.pageName};b.result=a,Framework.setPageResult(JSON.stringify(b))},close:function(a){if(b._canMovePageToBack===!1)return void b._onDeviceBackPressed();if(!b._onPagePause(!0).isCancelled()){var c=new EventObject({destroy:!!a});this.fireEvent("close",c),c.isCancelled()||Framework.closeApplication(c.destroy)}}};__m_Utils.inherit(d,Observable),b.addFeature(null,"Page",d),b.exportHelperMethod("open","open","Page"),b.exportHelperMethod("_cid","getCid","Page"),b.exportHelperMethod("parentPage","getParent","Page"),b.exportHelperMethod("pageName","getName","Page"),b.exportHelperMethod("postMessage","postMessage","Page"),b.exportHelperMethod("setResult","setResult","Page"),b.exportHelperMethod("close","close","Page"),b.exportHelperEvent("onClose","close","Page"),b.exportHelperEvent("onData","data","Page"),b.exportHelperEvent("onMessage","message","Page"),b.exportHelperEvent("onPause","pause","Page"),b.exportHelperEvent("onReady","ready","Page"),b.exportHelperEvent("onResult","result","Page"),b.exportHelperEvent("onResume","resume","Page"),b.exportHelperEvent("onBackground","background","Page"),b.exportHelperEvent("onForeground","foreground","Page"),b.exportHelperEvent("onAndroid",c.ANDROID,"Page"),b.exportHelperEvent("onBlackBerry",c.BLACKBERRY,"Page"),b.exportHelperEvent("onIPad",c.IPAD,"Page"),b.exportHelperEvent("onIPhone",c.IPHONE,"Page"),b.exportHelperEvent("onWeb",c.WEB,"Page"),b.exportHelperEvent("onWindowsPhone",c.WINDOWSPHONE,"Page")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d="ui",e={TOAST_DURATION_SHORT:0,TOAST_DURATION_LONG:1,toast:function(b,e){"object"==typeof b&&(b=JSON.stringify(b)),("number"!=typeof e||e!=this.TOAST_DURATION_SHORT&&e!=this.TOAST_DURATION_LONG)&&(e=this.TOAST_DURATION_SHORT),c.invoke(d,"toast",[a.getTranslatedLabel(b),e])},showProgress:function(b,e){b=b||"",e=e||"",c.invoke(d,"showProgress",[a.getTranslatedLabel(e),a.getTranslatedLabel(b)])},hideProgress:function(){c.invoke(d,"hideProgress",[])},confirm:function(a,b){__m_Utils.checkRequired("confirmOptions",a,["string","object"]);var e,f=[{label:"Yes"},{label:"No"}],g=f,h="";if("string"==typeof a?e=a:(e=a.message||"",a.buttons&&a.buttons.length>1&&(g=a.buttons),h=a.title||""),"undefined"!=typeof e&&""!=e){var i="";b&&(i=c.CallbackClient.subscribe(b));var j={title:h,message:e,buttons:g,callbackId:i};c.invoke(d,"confirm",[JSON.stringify(j)])}},alert:function(a,b,e){"object"==typeof a&&(a=JSON.stringify(a));var f="";e&&(f=c.CallbackClient.subscribe(e));var g={title:b||"",message:a||"",callbackId:f};c.invoke(d,"alert",[JSON.stringify(g)])}};e.showToast=e.toast,b.addFeature(d,"Ui",e),b.exportHelperProperty("TOAST_DURATION_SHORT","TOAST_DURATION_SHORT","Ui"),b.exportHelperProperty("TOAST_DURATION_LONG","TOAST_DURATION_LONG","Ui"),b.exportHelperMethod("toast","toast","Ui"),b.exportHelperMethod("alert","alert","Ui"),b.exportHelperMethod("showProgress","showProgress","Ui"),b.exportHelperMethod("hideProgress","hideProgress","Ui"),b.exportHelperMethod("confirm","confirm","Ui")}(window),function(a){function b(a,b,f){"undefined"==typeof b&&(b=c.Page.getName()),d.invoke(e,"log",[a,b,f])}var c=a.__mowbly__,d=c.Bridge,e="logger",f={LOG_DEBUG:1e4,LOG_INFO:2e4,LOG_WARN:3e4,LOG_ERROR:4e4,LOG_FATAL:5e4,debug:function(a,c){b(a,c,this.LOG_DEBUG)},info:function(a,c){b(a,c,this.LOG_INFO)},warn:function(a,c){b(a,c,this.LOG_WARN)},error:function(a,c){b(a,c,this.LOG_ERROR)},fatal:function(a,c){b(a,c,this.LOG_FATAL)}};c.addFeature(e,"Logger",f),c.exportHelperMethod("logDebug","debug","Logger"),c.exportHelperMethod("logInfo","info","Logger"),c.exportHelperMethod("logError","error","Logger"),c.exportHelperMethod("logFatal","fatal","Logger"),c.exportHelperMethod("logWarn","warn","Logger")}(window),function(a){function b(a,b){var d,e,f=b.length;if(1>f)throw new TypeError("The argument fp_callback is required");if(1==f){var g=b[0];__m_Utils.checkType("first argument",g,["object","function"]),"object"==typeof g?d=g:e=g}else 2==f&&(d=b[0],__m_Utils.checkType("[0]",d,"object"),e=b[1]);c.Camera.getPicture(a,d,e)}var c=a.__mowbly__,d=c.Bridge,e="camera",f={SOURCE_PHOTO_LIBRARY:0,SOURCE_CAMERA:1,SOURCE_PHOTO_ALBUM:2,TYPE_JPG:0,TYPE_PNG:1,QUALITY_LOW:25,QUALITY_MEDIUM:75,QUALITY_HIGH:100,BACK:0,FRONT:1,ALL:2,configuration:null,DefaultOptions:{allowEdit:!1,multiple:!1,type:0,quality:100,readData:!1,width:"auto",height:"auto"},getConfigurationForCameraType:function(a,b){("number"!=typeof b||b!=this.BACK&&b!=this.FRONT&&b!=this.ALL)&&(b=this.BACK);var c=[];if(b==this.BACK)for(i in a){var d=a[i];d.type==this.BACK&&c.push(d)}else if(b==this.FRONT)for(i in a){var d=a[i];d.type==this.FRONT&&c.push(d)}else c=a;return c},getConfiguration:function(a,b){function c(a){this.camera.configuration=a.result;var b=this.camera.getConfigurationForCameraType(a.result,this.cameraType);this.callback({code:null==b?0:1,result:b})}var f=arguments.length;if(1>f)throw new TypeError("The argument fp_callback is required");__m_Utils.checkType("fp_callback",a,"function"),("number"!=typeof b||b!=this.BACK&&b!=this.FRONT&&b!=this.ALL)&&(b=this.BACK);var g={context:{camera:this,cameraType:b,callback:a},callback:c};if(null==this.configuration)d.invoke(e,"getConfiguration",[],g);else{var h=this.getConfigurationForCameraType(this.configuration,b);a({code:null==h?0:1,result:h})}},getPicture:function(a,b,f){("undefined"==typeof a||0>a||a>2)&&(a=this.SOURCE_CAMERA),b=b||{};var b=__m_Utils.extendOptions({},this.DefaultOptions,b),g=b.filePath;if(g){if(__m_Utils.checkType("options.filePath",g,["string",c.File]),"string"==typeof g){var h=new c.File(g);b.filePath=h}}else"undefined"!=typeof g&&delete b.filePath;"string"==typeof b.width&&"auto"===b.width.toLowerCase()&&(b.width=-1),"string"==typeof b.height&&"auto"===b.height.toLowerCase()&&(b.height=-1),d.invoke(e,"getPicture",[a,b],f)},setDefaultOptions:function(a){"object"==typeof a&&__m_Utils.extendOptions(this.DefaultOptions,a)}};$m.capturePic=function(){b(c.Camera.SOURCE_CAMERA,arguments)},$m.choosePic=function(){b(c.Camera.SOURCE_PHOTO_LIBRARY,arguments)},$m.choosePicFromAlbum=function(){b(c.Camera.SOURCE_PHOTO_ALBUM,arguments)},$m.getPic=function(){var a,b,c=arguments.length;if(1>c)throw new TypeError("The argument fp_callback is required");if(1==c){var d=arguments[0];__m_Utils.checkType("first argument",d,["object","function"]),"object"==typeof d?a=d:b=d}else 2==c&&(a=arguments[0],__m_Utils.checkType("[0]",a,"object"),b=arguments[1]);$m.getCamConfig(function(c){var d,e,f;a||(a={}),0==c.result.length?(e=[{label:a.choosePicLabel?a.choosePicLabel:"Choose"},{label:a.cancelLabel?a.cancelLabel:"Cancel"}],d=a.chooseMessage?a.chooseMessage:"Tap 'Choose' to select a picture from gallery.",f=!1):(e=[{label:a.capturePicLabel?a.capturePicLabel:"Capture"},{label:a.choosePicLabel?a.choosePicLabel:"Choose"},{label:a.cancelLabel?a.cancelLabel:"Cancel"}],d=a.camMessage?a.camMessage:"Tap 'Capture' to capture a picture or 'Choose' to select a picture from gallery.",f=!0);var g={title:a.title?a.title:"Select Picture",message:d,buttons:e},h={code:-1,error:{message:"User cancelled action",description:"User cancelled action"}};$m.confirm(g,function(c){f?0===c?$m.capturePic(a,b):1===c?$m.choosePic(a,b):b(h):0===c?$m.choosePic(a,b):b(h)})})},__m_Utils.inherit(f,Observable),c.addFeature(e,"Camera",f),c.exportHelperProperty("CAM_JPG","TYPE_JPG","Camera"),c.exportHelperProperty("CAM_PNG","TYPE_PNG","Camera"),c.exportHelperProperty("CAM_QUALITY_LOW","QUALITY_LOW","Camera"),c.exportHelperProperty("CAM_QUALITY_MED","QUALITY_MEDIUM","Camera"),c.exportHelperProperty("CAM_QUALITY_HIGH","QUALITY_HIGH","Camera"),c.exportHelperProperty("CAM_REAR","BACK","Camera"),c.exportHelperProperty("CAM_FRONT","FRONT","Camera"),c.exportHelperProperty("CAM_ALL","ALL","Camera"),c.exportHelperMethod("getCamConfig","getConfiguration","Camera"),c.exportHelperMethod("camSetup","setDefaultOptions","Camera")}(window),function(a){function b(){}var c=a.__mowbly__,d=c.Bridge;b.FEATURE="feature",b.ADMIN="admin",b.SUBADMIN="subAdmin",b.LOCALITY="locality",b.THOROUGHFARE="thoroughfare",b.POSTAL_CODE="postalCode",b.COUNTRY_CODE="countryCode",b.COUNTRY_NAME="country",b.PHONE="phone",b.URL="url";var e="contacts",f={TYPE_FAX:"fax",TYPE_HOME:"home",TYPE_OTHER:"other",TYPE_MOBILE:"mobile",TYPE_PAGER:"pager",TYPE_WORK:"work",CONTACT_ADDRESSES:"addresses",CONTACT_BIRTHDAY:"birthday",CONTACT_DEPARTMENT:"department",CONTACT_EMAILS:"emails",CONTACT_IMPPS:"impps",CONTACT_CATEGORIES:"categories",CONTACT_JOB_TITLE:"jobTitle",CONTACT_NAME:"name",CONTACT_PHONES:"phones",CONTACT_PHOTOS:"photos",CONTACT_URLS:"urls",IM_SERVICE_AIM:"aim",IM_SERVICE_ICQ:"icq",IM_SERVICE_JABBER:"jabber",IM_SERVICE_YAHOO:"yahoo",CATEGORY_BUSINESS:"business",CATEGORY_PERSONAL:"personal",Contact:function(a,b,g){this.addresses=[],this.birthday,this.category,this.emails=[],this.impps=[],this.name,this.nickname,this.note,this.organization={},this.phones=[],this.photos=[],this.urls=[],this.fieldByType=function(a,b,c){for(var d,e=b.length,g=0;e>g;g++){var h=b[g];if(h.type===a){d=c==f.CONTACT_ADDRESSES||c==f.CONTACT_IMPPS?h:h.value;break}}return d},this.getAddress=function(a){return a=a||f.TYPE_WORK,this.fieldByType(a,this.addresses,f.CONTACT_ADDRESSES)||{}},this.getHomeAddress=function(){return this.getAddress(f.TYPE_HOME)},this.getWorkAddress=function(){return this.getAddress(f.TYPE_WORK)},this.getOtherAddress=function(){return this.getAddress(f.TYPE_OTHER)},this.getAddresses=function(){return this.addresses},this.getBirthday=function(){return new Date(this.birthday).toString("MM/dd/yyyy")},this.getCategory=function(){return this.category},this.getEmail=function(a){return a=a||f.TYPE_WORK,this.fieldByType(a,this.emails)||""},this.getHomeEmail=function(){return this.getEmail(f.TYPE_HOME)},this.getWorkEmail=function(){return this.getEmail(f.TYPE_WORK)},this.getOtherEmail=function(){return this.getEmail(f.TYPE_OTHER)},this.getEmails=function(){return this.emails},this.getIm=function(a){return a=a||IM_SERVICE_JABBER,this.fieldByType(a,this.impps,f.CONTACT_ADDRESSES)||""},this.getAimIm=function(){return this.getIm(f.IM_SERVICE_AIM)},this.getJabberIm=function(){return this.getIm(f.IM_SERVICE_JABBER)},this.getIcqIm=function(){return this.getIm(f.IM_SERVICE_ICQ)},this.getYahooIm=function(){return this.getIm(f.IM_SERVICE_YAHOO)},this.getIms=function(){return this.impps},this.getName=function(){return this.name},this.getNickname=function(){return this.nickname},this.getNote=function(){return this.note},this.getOrganization=function(){return this.organization},this.getPhone=function(a){return"undefined"==typeof a?this.fieldByType(f.TYPE_WORK,this.phones)||this.fieldByType(f.TYPE_MOBILE,this.phones)||this.fieldByType(f.TYPE_HOME,this.phones)||this.fieldByType(f.TYPE_OTHER,this.phones)||this.fieldByType(f.TYPE_FAX,this.phones)||"":this.fieldByType(a,this.phones)||""},this.getHomePhone=function(){return this.getPhone(f.TYPE_HOME)},this.getWorkPhone=function(){return this.getPhone(f.TYPE_WORK)},this.getOtherPhone=function(){return this.getPhone(f.TYPE_OTHER)},this.getFax=function(){return this.getPhone(f.TYPE_FAX)},this.getMobile=function(){return this.getPhone(f.TYPE_MOBILE)},this.getPager=function(){return this.getPhone(f.TYPE_PAGER)},this.getPhones=function(){return this.phones},this.getPhoto=function(a){return a=a||f.TYPE_OTHER,this.fieldByType(a,this.photos)||""},this.getPhotos=function(){return this.photos},this.getUrl=function(a){return a=a||f.TYPE_WORK,this.fieldByType(a,this.urls)||""},this.getHomeUrl=function(){return this.getUrl(f.TYPE_HOME)},this.getWorkUrl=function(){return this.getUrl(f.TYPE_WORK)},this.getOtherUrl=function(){return this.getUrl(f.TYPE_OTHER)},this.getUrls=function(){return this.urls},this.addAddress=function(a,b){return __m_Utils.checkRequired("address",a,"object"),__m_Utils.checkRequired("type",b,"string"),this.addresses.push(new f.ContactAddress(b,a)),this},this.setAddress=function(){var a=arguments.length;if(0===a)throw new TypeError("The parameter address is required.");var b=__m_Utils.argumentsAsArray(arguments);return 1===a&&b.push(f.TYPE_WORK),this.addAddress.apply(this,b)},this.addEmail=function(a,b){__m_Utils.checkRequired("type",b,"string"),__m_Utils.checkRequired("email",a,"string");var c=new f.ContactField(b,a);return this.emails.push(c),this},this.setEmail=function(){var a=arguments.length;if(0===a)throw new TypeError("The parameter email is required.");var b=__m_Utils.argumentsAsArray(arguments);return 1===a&&b.push(f.TYPE_WORK),this.addEmail.apply(this,b)},this.addIm=function(a,b){__m_Utils.checkRequired("type",b,"string"),__m_Utils.checkRequired("IM",a,"string");var c=new f.ContactField(b,a);return this.impps.push(c),this},this.setIm=function(){var a=arguments.length;if(0===a)throw new TypeError("The parameter im is required.");var b=__m_Utils.argumentsAsArray(arguments);return 1===a&&b.push(f.IM_SERVICE_JABBER),this.addIm.apply(this,b)},this.addPhone=function(a,b){__m_Utils.checkRequired("type",b,"string"),__m_Utils.checkRequired("phone",a,["string","number"]),a=""+a;var c=new f.ContactField(b,a);return this.phones.push(c),this},this.setPhone=function(){var a=arguments.length;if(0===a)throw new TypeError("The parameter phone is required.");var b=__m_Utils.argumentsAsArray(arguments);return 1===a&&b.push(f.TYPE_WORK),this.addPhone.apply(this,b)},this.addPhoto=function(a,b){__m_Utils.checkRequired("photo",a,["string",c.File]),"string"==typeof a&&(a=new c.File(a));var d=new f.ContactField(b,a);return this.photos.push(d),this},this.setPhoto=function(){var a=__m_Utils.argumentsAsArray(arguments);return a.push(f.TYPE_OTHER),this.addPhoto.apply(this,a)},this.addUrl=function(a,b){__m_Utils.checkRequired("type",b,"string"),__m_Utils.checkRequired("url",a,"string");var c=new f.ContactField(b,a);return this.urls.push(c),this},this.setUrl=function(){var a=arguments.length;if(0===a)throw new TypeError("The parameter url is required.");var b=__m_Utils.argumentsAsArray(arguments);return 1===a&&b.push(f.TYPE_WORK),this.addUrl.apply(this,b)},this.setBirthday=function(a){if(__m_Utils.checkRequired("birthday",a),"number"==typeof a)this.birthday=a;else{var b=Date.parse(a);if(isNaN(b))throw new TypeError("Birthday is not valid.");this.birthday=b}return this},this.setCategory=function(a){return __m_Utils.checkRequired("category",a,"string"),this.category=a,this},this.setName=function(a,b,c,d,e){__m_Utils.checkRequired("name",a,"string");var g=new f.ContactName(a,b,c,d,e);return this.name=g,this},this.setNickname=function(a){if(0===arguments.length)throw new TypeError("Nickname cannot be empty.");return this.nickname=a,this},this.setNote=function(a){if(0===arguments.length)throw new TypeError("Note cannot be empty.");return this.note=a,this},this.setOrganization=function(a,b,c){if(0===arguments.length)throw new TypeError("Organization cannot be empty.");var d=new f.ContactOrganization(a,b,c);return this.organization=d,this},this.removeFieldByType=function(a,b){__m_Utils.checkRequired("type",a,"string");for(var c=b.length,d=-1,e=0;c>e;e++)if(b[e].type==a){d=e;break}d>-1&&b.splice(d,1)},this.removeAddress=function(a){return this.removeFieldByType(a,this.addresses),this},this.removeHomeAddress=function(){return this.removeAddress(f.TYPE_HOME),this},this.removeWorkAddress=function(){return this.removeAddress(f.TYPE_WORK),this},this.removeOtherAddress=function(){return this.removeAddress(f.TYPE_OTHER),this},this.removeAddresses=function(){return delete this.addresses,this},this.removeBirthday=function(){return delete this.birthday,this},this.removeCategory=function(){return delete this.category,this},this.removeEmail=function(a){return this.removeFieldByType(a,this.emails),this},this.removeHomeEmail=function(){return this.removeEmail(f.TYPE_HOME),this},this.removeWorkEmail=function(){return this.removeEmail(f.TYPE_WORK),this},this.removeOtherEmail=function(){return this.removeEmail(f.TYPE_OTHER),this
},this.removeEmails=function(){return delete this.emails,this},this.removeIm=function(a){return this.removeFieldByType(a,this.m_impps),this},this.removeAimIm=function(){return this.removeIm(f.IM_SERVICE_AIM),this},this.removeJabberIm=function(){return this.removeIm(f.IM_SERVICE_JABBER),this},this.removeIcqIm=function(){return this.removeIm(f.IM_SERVICE_ICQ),this},this.removeYahooIm=function(){return this.removeIm(f.IM_SERVICE_YAHOO),this},this.removeIms=function(){return delete this.impps,this},this.removeName=function(){return delete this.name,this},this.removeNickname=function(){return delete this.nickname,this},this.removeNote=function(){return delete this.note,this},this.removeOrganization=function(){return delete this.organization,this},this.removePhone=function(a){this.removeFieldByType(a,this.phones)},this.removePhones=function(){return delete this.phones,this},this.removePhoto=function(a){return this.removeFieldByType(a,this.photos),this},this.removePhotos=function(){return delete this.photos,this},this.removeUrl=function(a){return this.removeFieldByType(a,this.urls),this},this.removeHomeUrl=function(){return this.removeUrl(f.TYPE_HOME),this},this.removeWorkUrl=function(){return this.removeUrl(f.TYPE_WORK),this},this.removeOtherUrl=function(){return this.removeUrl(f.TYPE_OTHER),this},this.removeUrls=function(){return this.urls},this.remove=function(a){if(d.getType()!==d.WINDOWSPHONE&&"undefined"==typeof this.id)throw new TypeError("Invalid contact.");d.invoke(e,"deleteContact",[this.id],a)},this.save=function(a){var b=this,c=function(c){c.code&&(b.id=c.result),c.result=b,a(c)};d.invoke(e,"saveContact",[this],c)},this.view=function(){var a;if(d.getType()!==d.WINDOWSPHONE){if(a=this.id,"undefined"==typeof this.id)throw new TypeError("Could not view contact. Unique id is missing. Save the contact to get unique id.")}else a=this;d.invoke(e,"viewContact",[a])},a&&("string"==typeof a?this.setName(a):"object"==typeof a&&a instanceof f.ContactName&&a.firstName&&(this.name=a)),b&&("string"==typeof b||"number"==typeof b?this.setPhone(b):__m_Utils.isArray(b)&&(this.phones=b)),g&&("string"==typeof g?this.setEmail(g):__m_Utils.isArray(g)&&(this.emails=g))},ContactName:function(a,b,c,d,e){this.firstName=a,this.lastName=b,this.middleName=c,this.prefix=d,this.suffix=e,this.search=function(a){return __m_Utils.search(a,this)}},ContactAddress:function(a,b){this.type=a,this.street=b.street,this.city=b.city,this.region=b.region,this.postalCode=b.postalCode,this.country=b.country,this.additionalInfo=b.additionalInfo,this.search=function(a){return __m_Utils.search(a,this)}},ContactField:function(a,b){this.type=a,this.value=b,this.search=function(a){return __m_Utils.search(a,this)}},ContactOrganization:function(a,b,c){this.name=a,this.department=b,this.jobTitle=c,this.search=function(a){return __m_Utils.search(a,this)}},ContactOptions:function(a,b){"undefined"==typeof b&&(b=0),this.limit=b,this.properties=a},ContactError:{UNKNOWN_ERR:0,INVALID_ARGUMENT_ERROR:1,CONTACT_NOT_FOUND_ERROR:30,CONTACT_INVALID_ERROR:31},create:function(a,b,c){if("string"==typeof a||"undefined"==typeof a){var d=a;return new this.Contact(d,b,c)}if("object"==typeof a){var e=function(a,b){var c={};if(b==f.CONTACT_ADDRESSES||b==f.CONTACT_IMPPS)for(var d in a)c[a[d].type]=a[d];else for(var d in a)c[a[d].type]=a[d].value;return c},g=this.create();if(g.id=a.id,a.addresses&&a.addresses.length>0){var h=e(a.addresses,f.CONTACT_ADDRESSES);if(h){var i=h[this.TYPE_HOME];i&&g.addAddress({type:i.type,street:i.street,city:i.city,region:i.region,postalCode:i.postalCode,country:i.country,additionalInfo:i.additionalInfo},i.type);var j=h[this.TYPE_WORK];j&&g.addAddress({type:j.type,street:j.street,city:j.city,region:j.region,postalCode:j.postalCode,country:j.country,additionalInfo:j.additionalInfo},j.type);var k=h[this.TYPE_OTHER];k&&g.addAddress({type:k.type,street:k.street,city:k.city,region:k.region,postalCode:k.postalCode,country:k.country,additionalInfo:k.additionalInfo},k.type)}}if(a.birthday&&g.setBirthday(a.birthday),a.emails){var l=e(a.emails);l&&(l[this.TYPE_HOME]&&g.setEmail(l[this.TYPE_HOME],this.TYPE_HOME),l[this.TYPE_WORK]&&g.setEmail(l[this.TYPE_WORK],this.TYPE_WORK),l[this.TYPE_OTHER]&&g.setEmail(l[this.TYPE_OTHER],this.TYPE_OTHER))}if(a.impps&&a.impps.length>0){var m=e(a.impps,f.CONTACT_IMPPS);m&&(m[this.IM_SERVICE_AIM]&&g.setIm(m[this.IM_SERVICE_AIM].value,this.IM_SERVICE_AIM),m[this.IM_SERVICE_ICQ]&&g.setIm(m[this.IM_SERVICE_ICQ].value,this.IM_SERVICE_ICQ),m[this.IM_SERVICE_JABBER]&&g.setIm(m[this.IM_SERVICE_JABBER].value,this.IM_SERVICE_JABBER),m[this.IM_SERVICE_YAHOO]&&g.setIm(m[this.IM_SERVICE_YAHOO].value,this.IM_SERVICE_YAHOO))}var d=a.name;d&&g.setName(d.firstName,d.lastName,d.middleName,d.prefix,d.suffix),a.nickname&&g.setNickname(a.nickname),a.note&&g.setNote(a.note),a.category&&g.setCategory(a.category);var n=a.organization;if(n&&g.setOrganization(n[this.CONTACT_NAME],n[this.CONTACT_DEPARTMENT],n[this.CONTACT_JOB_TITLE]),a.phones){var o=e(a.phones);o&&(o[this.TYPE_HOME]&&g.setPhone(o[this.TYPE_HOME],this.TYPE_HOME),o[this.TYPE_WORK]&&g.setPhone(o[this.TYPE_WORK],this.TYPE_WORK),o[this.TYPE_MOBILE]&&g.setPhone(o[this.TYPE_MOBILE],this.TYPE_MOBILE),o[this.TYPE_PAGER]&&g.setPhone(o[this.TYPE_PAGER],this.TYPE_PAGER),o[this.TYPE_FAX]&&g.setPhone(o[this.TYPE_FAX],this.TYPE_FAX),o[this.TYPE_OTHER]&&g.setPhone(o[this.TYPE_OTHER],this.TYPE_OTHER))}var p=a.photos;if(p)for(var q=p.length,r=0;q>r;r++){var s=p[r].value;s&&""!=s.value&&g.addPhoto(p[r].type||this.TYPE_WORK,s)}if(a.urls){var t=e(a.urls);t&&(t[this.TYPE_HOME]&&g.setUrl(t[this.TYPE_HOME],this.TYPE_HOME),t[this.TYPE_WORK]&&g.setUrl(t[this.TYPE_WORK],this.TYPE_WORK),t[this.TYPE_OTHER]&&g.setUrl(t[this.TYPE_OTHER],this.TYPE_OTHER))}return g}},call:function(a,b){__m_Utils.checkRequired("phoneNumber",a,["string","number",c.Contacts.Contact]),a instanceof c.Contacts.Contact&&(a=a.getPhone(),__m_Utils.checkRequired("phoneNumber",a,["string","number"])),b?d.invoke(e,"callContact",[""+a]):c.Ui.confirm({message:"Call "+a,buttons:[{label:"Call"},{label:"Cancel"}]},function(b){0==b&&d.invoke(e,"callContact",[""+a])})},find:function(a){var b,c=new f.ContactOptions([],0),g=arguments.length;__m_Utils.checkRequired("filter",a,"string"),g>1&&(2==g?(arg1=arguments[1],__m_Utils.checkType("second argument",arg1,["object","function"]),"function"==typeof arg1?b=arg1:c=arg1):(c=arguments[1],__m_Utils.checkType("options",c,"object"),b=arguments[2],__m_Utils.checkType("fp_callback",b,"function")));var h=this,i=function(a){if(a.code){var c=[];for(var d in a.result){var e=a.result[d];c.push(h.create(e))}a.result=c}"function"==typeof b&&b(a)};d.invoke(e,"findContact",[a,c],i)},pick:function(){var a,b={},c=arguments.length;if(1==c){var f=arguments[0];__m_Utils.checkType("first argument",f,["object","function"]),"object"==typeof f?b=f:a=f}else c>1&&(b=arguments[0],a=arguments[1],__m_Utils.checkType("options",b,"object"),__m_Utils.checkType("fp_callback",a,"function"));var g={filter:[],multiple:!1,bChooseProperty:!1,bPerformDefaultAction:!1},h=__m_Utils.extendOptions({},g,b),i=this,j=function(b){if(b.code){var c=[];if(__m_Utils.isArray(b.result))for(var d=b.result.length,e=0;d>e;e++){var f=b.result[e];c.push(i.create(f))}else c.push(i.create(b.result));b.result=c}"function"==typeof a&&a(b)};d.invoke(e,"pickContact",[h.filter,h.multiple,h.bChooseProperty,h.bPerformDefaultAction],j)}};a.mowbly.contact=function(a,b,c){var d=__mowbly__.Contacts.create(a,b,c);return d},__m_Utils.inherit(f,Observable),c.addFeature(null,"Address",b),c.addFeature(e,"Contacts",f),c.exportHelperMethod("callContact","call","Contacts"),c.exportHelperMethod("findContact","find","Contacts"),c.exportHelperMethod("pickContact","pick","Contacts")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d="device",e={APPLICATION_MEMORY:"applicationMemory",AVAILABLE_EXTERNAL_MEMORY:"availableExternalMemory",AVAILABLE_INTERNAL_MEMORY:"availableInternalMemory",TOTAL_EXTERNAL_MEMORY:"totalExternalMemory",TOTAL_INTERNAL_MEMORY:"totalInternalMemory",getDeviceId:function(a){c.invoke(d,"getDeviceId",[],a)},getMemoryStatus:function(a){c.invoke(d,"getMemoryStatus",[],a)},isAndroid:function(){return c.getType()===c.ANDROID},isBlackBerry:function(){return c.getType()===c.BLACKBERRY},isIPhone:function(){return c.getType()===c.IPHONE},isIPad:function(){return c.getType()===c.IPAD},isIOS:function(){return this.isIPad()||this.isIPhone()},isWindowsPhone:function(){return c.getType()===c.WINDOWSPHONE},isWeb:function(){return c.getType()===c.WEB}};__m_Utils.inherit(e,Observable),b.addFeature(d,"Device",e),b.exportHelperProperty("MEM_APP","APPLICATION_MEMORY","Device"),b.exportHelperProperty("MEM_EXT_AVL","AVAILABLE_EXTERNAL_MEMORY","Device"),b.exportHelperProperty("MEM_INT_AVL","AVAILABLE_INTERNAL_MEMORY","Device"),b.exportHelperProperty("MEM_EXT_TOT","TOTAL_EXTERNAL_MEMORY","Device"),b.exportHelperProperty("MEM_INT_TOT","TOTAL_INTERNAL_MEMORY","Device"),b.exportHelperMethod("getDeviceId","getDeviceId","Device"),b.exportHelperMethod("getMemStat","getMemoryStatus","Device"),b.exportHelperMethod("isAndroid","isAndroid","Device"),b.exportHelperMethod("isBlackBerry","isBlackBerry","Device"),b.exportHelperMethod("isIPhone","isIPhone","Device"),b.exportHelperMethod("isIPad","isIPad","Device"),b.exportHelperMethod("isIOS","isIOS","Device"),b.exportHelperMethod("isWindowsPhone","isWindowsPhone","Device"),b.exportHelperMethod("isWeb","isWeb","Device")}(window),function(a){function b(a){a?(a.storageType||(a.storageType=d.FILE_INTERNAL_STORAGE),a.level||(a.level=d.DefaultLevel)):a={storageType:d.FILE_INTERNAL_STORAGE,level:d.DefaultLevel},this.__options=a}function c(a,c){this.path=a,this.__FileManager=b.getFileManager(c)}function d(){var a,c,e=arguments.length;if(1>e)throw new TypeError("The argument path is required");if(1==e?a=arguments[0]:(a=arguments[0],c=arguments[1],__m_Utils.checkType("options",c,"object")),__m_Utils.checkRequired("path",a,"string"),!a)throw new TypeError("The argument path cannot be empty string");this.path=a,this.__FileManager=b.getFileManager(c),0==a.indexOf("/")&&(this.__FileManager.__options.level=d.STORAGE)}function e(a){var b,c,e,f=a.length;if(1>f)throw new TypeError("The argument file object or path is required");if(1==f?c=a[0]:(c=a[0],e=a[1]),__m_Utils.checkRequired("path",c,["string",d]),"string"==typeof c)b=new d(c);else{if(!(c instanceof d))throw new TypeError("The argument file can be either string or File object");b=c}return[b,e]}var f=a.__mowbly__,g=f.Bridge,h="file";b.prototype.getRootDirectory=function(a){g.invoke(h,"getRootDirectory",["",this.__options],a)},b.prototype.testDirExists=function(a,b){g.invoke(h,"testDirExists",[a,this.__options],b)},b.prototype.testFileExists=function(a,b){g.invoke(h,"testFileExists",[a,this.__options],b)},b.prototype.getFiles=function(a,b){g.invoke(h,"getFilesJSONString",[a,this.__options],b)},b.prototype.getDirectory=function(a,b){g.invoke(h,"getDirectory",[a,this.__options],b)},b.prototype.getFile=function(a,b){g.invoke(h,"getFile",[a,this.__options],b)},b.prototype.deleteDirectory=function(a,b){g.invoke(h,"deleteDirectory",[a,this.__options],b)},b.prototype.deleteFile=function(a,b){g.invoke(h,"deleteFile",[a,this.__options],b)},b.prototype.readFile=function(a,b){g.invoke(h,"read",[a,this.__options],b)},b.prototype.writeFile=function(a,b,c,d){g.invoke(h,"write",[a,b,c,this.__options],d)},b.getFileManager=function(a){a?(a.storageType||(a.storageType=d.FILE_INTERNAL_STORAGE),a.level||(a.level=d.DefaultLevel)):a={storageType:d.FILE_INTERNAL_STORAGE,level:d.DefaultLevel},this._fileManagers||(this._fileManagers={});var c=a.storageType+":"+a.level;return this._fileManagers[c]||(this._fileManagers[c]=new b(a))},c.root=function(){var a=this.__FileManager.getRootDirectory();return new c(a)},c.prototype.getPath=function(a){var b=this,c=function(c){var d=c.result;d&&(d+="/"+b.path,c.result=d),a(c)};this.__FileManager.getRootDirectory(c)},c.prototype.create=function(a){this.__FileManager.getDirectory(this.path,a)},c.prototype.exists=function(a){this.__FileManager.testDirExists(this.path,a)},c.prototype.getDirectory=function(a,b){return new c(this.path+"/"+a,b)},c.prototype.getFile=function(a,b){return new d(this.path+"/"+a,b)},c.prototype.getFiles=function(a){this.__FileManager.getFiles(this.path,a)},c.prototype.remove=function(a){this.__FileManager.deleteDirectory(this.path,a)},d.FILE=0,d.DIRECTORY=1,d.FILE_MODE_APPEND=!0,d.APPLICATION=1,d.STORAGE=2,d.DefaultLevel=d.APPLICATION,d.FILE_INTERNAL_STORAGE=0,d.FILE_EXTERNAL_STORAGE=1,d.FILE_CACHE=2,d.prototype.toJSON=function(){var a={};return a.path=this.path,a.storageType=this.__FileManager.__options.storageType,a.level=this.__FileManager.__options.level,a},d.prototype.getPath=function(a){var b=this,c=function(c){var d=c.result;d&&(d+="/"+b.path,c.result=d),a(c)};this.__FileManager.getRootDirectory(c)},d.prototype.create=function(a){this.__FileManager.getFile(this.path,a)},d.prototype.exists=function(a){this.__FileManager.testFileExists(this.path,a)},d.prototype.read=function(a){this.__FileManager.readFile(this.path,a)},d.prototype.write=function(a,b,c){"object"==typeof a&&(a=JSON.stringify(a)),this.__FileManager.writeFile(this.path,a,!!c,b)},d.prototype.remove=function(a){this.__FileManager.deleteFile(this.path,a)},a.mowbly.deleteFile=function(){var a=e(arguments),b=a[0],c=a[1];b.remove(c)},a.mowbly.fileExists=function(){var a=e(arguments),b=a[0],c=a[1];b.exists(c)},a.mowbly.getFilePath=function(){var a=e(arguments),b=a[0],c=a[1];b.getPath(c)},a.mowbly.readFile=function(){var a=e(arguments),b=a[0],c=a[1];b.read(c)},a.mowbly.file=function(){var a,b,c=arguments.length;if(1>c)throw new TypeError("The argument path is required");return 1==c?(a=arguments[0],b={}):(a=arguments[0],b=arguments[1]),__m_Utils.checkRequired("path",a,"string"),new d(a,b)},a.mowbly.directory=function(){var a,b,d=arguments.length;if(1>d)throw new TypeError("The argument path is required");return 1==d?(a=arguments[0],b={}):(a=arguments[0],b=arguments[1]),__m_Utils.checkRequired("path",a,"string"),new c(a,b)},a.mowbly.writeFile=function(){var a,b,c,e,f=arguments.length;if(2>f)throw new TypeError("The argument file object or path and content is required");2==f?(b=arguments[0],c=arguments[1]):(b=arguments[0],c=arguments[1],e=arguments[2]),__m_Utils.checkRequired("path",b,["string",d]),__m_Utils.checkRequired("content",c,["string","object"]),a="string"==typeof b?new d(b):b,a.write(c,e)},a.mowbly.appendFile=function(){var a,b,c,e,f=arguments.length;if(2>f)throw new TypeError("The argument file object or path and content is required");2==f?(b=arguments[0],c=arguments[1]):(b=arguments[0],c=arguments[1],e=arguments[2]),__m_Utils.checkRequired("path",b,["string",d]),__m_Utils.checkRequired("content",c,["string","object"]),a="string"==typeof b?new d(b):b,a.write(c,e,!0)},a.mowbly.unzipFile=function(){var a,b,c,e=arguments.length;if(2>e)throw new TypeError("The zip file and destination directory arguments are required");a=arguments[0],b=arguments[1],3===e&&(c=arguments[2]),"string"==typeof a&&(a=new d(a)),"string"==typeof b&&(b=new d(b)),g.invoke(h,"unzip",[a.toJSON(),b.toJSON()],c)},__m_Utils.inherit(d,Observable),f.addFeature(h,"File",d),f.addFeature(null,"Directory",c),f.exportHelperProperty("FILE","FILE","File"),f.exportHelperProperty("DIR","DIRECTORY","File"),f.exportHelperProperty("FILE_APPEND","FILE_MODE_APPEND","File"),f.exportHelperProperty("APP_LEVEL","APPLICATION","File"),f.exportHelperProperty("STORAGE_LEVEL","STORAGE","File"),f.exportHelperProperty("DEVICE_MEMORY","FILE_INTERNAL_STORAGE","File"),f.exportHelperProperty("SDCARD","FILE_EXTERNAL_STORAGE","File"),f.exportHelperProperty("CACHE_DIR","FILE_CACHE","File")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d="geolocation",e={};e.getCurrentPosition=function(){function a(a){__m_Utils.isOfType(a.enableHighAccuracy,"boolean")||(a.enableHighAccuracy=f),__m_Utils.isOfType(a.timeout,"number")||(a.timeout=g)}var b,e,f=!1,g=1e4,h=arguments.length;1==h?e=arguments[0]:(b=arguments[0],e=arguments[1]),b=b||{},__m_Utils.checkRequired("callback",e,["object","function"]),a(b),c.invoke(d,"getCurrentPosition",[b],e)},e.getLocationForCoordinates=function(){var a,b,e,f=1,g=arguments.length;if(3>g)throw new TypeError("The arguments latitude, longitude and fp_callback are required");if(3==g?(a=arguments[0],b=arguments[1],e=arguments[2]):(a=arguments[0],b=arguments[1],f=arguments[2],e=arguments[3]),__m_Utils.checkRequired("latitude",a,"number"),__m_Utils.checkRequired("longitude",b,"number"),__m_Utils.checkRequired("callback",e,["object","function"]),__m_Utils.checkType("maxResults",f,"number"),!__m_Utils.isInRange(a,-90,90))throw new TypeError("The argument latitude should be between -90 & 90");if(!__m_Utils.isInRange(b,-180,180))throw new TypeError("The argument latitude should be between -180 & 180");c.invoke(d,"getLocationForCoordinates",[a,b,f],e)},__m_Utils.inherit(e,Observable),b.addFeature(d,"GeoLocation",e),b.exportHelperMethod("getLocation","getCurrentPosition","GeoLocation")}(window),function(a){function b(a){this.options={url:"",type:"GET",data:{},dataType:"json",parts:[],headers:{},timeout:3e4,withCredentials:!1,replaceInBody:!1,replaceInHeaders:[],replaceInUrl:!1,authMode:0};var b=this,c=function(a){__m_Utils.checkRequired("options",a,"object"),__m_Utils.checkRequired("options.url",a.url,"string"),a.timeout=a.timeout||3e4,__m_Utils.extendOptions(b.options,a),b.options.type||(b.options.type="GET"),b.options.headers||(b.options.headers={}),b.options.type=b.options.type.toUpperCase()};c(a)}var c=a.__mowbly__,d=c.Bridge,e="http",f={};b.GET="GET",b.POST="POST",b.PUT="PUT",b.DELETE="DELETE",b.HEAD="HEAD",b.prototype.setType=function(a){if(__m_Utils.checkRequired("type",a,"string"),a=a.toUpperCase(),"GET"!=a&&"POST"!=a&&"PUT"!=a&&"DELETE"!=a&&"HEAD"!=a)throw new TypeError("The argument type should be GET, POST, PUT, DELETE or HEAD");return this.options.type=a,this},b.prototype.setTimeout=function(a){return __m_Utils.checkRequired("timeout",a,"number"),this.options.timeout=a,this},b.prototype.addHeader=function(a,b){return __m_Utils.checkRequired("name",a,"string"),__m_Utils.checkRequired("value",b,"string"),this.options.headers[a]=b,this},b.prototype.setData=function(a){__m_Utils.checkRequired("data",a,["string","object"]);var b=typeof a;return this.options.data=a,this.options.dataType="object"==b?"json":b,this},b.prototype.addPart=function(a,b,d,e){if(__m_Utils.checkRequired("name",a,"string"),__m_Utils.checkRequired("content",b),!(b instanceof c.File)&&"string"!=typeof b)throw new TypeError("The argument content has to be either a string or a mowbly.File object");d=d||"application/octet-stream";var f;return b instanceof c.File?(f={type:"file",name:a,value:b.toJSON(),contentType:d},"string"==typeof e&&(f.filename=e)):f={type:"string",name:a,value:b,contentType:d},this.options.parts.push(f),this},b.prototype.setDownloadFile=function(a){if(!(a instanceof c.File))throw new TypeError("The argument file has to a mowbly.File object");return this.options.downloadFile=a.toJSON(),this},b.prototype.send=function(a){d.invoke(e,"request",[this.options],a)},f.Request=b,f.get=function(){var a,c,d={},e=arguments.length;if(0==e)throw new TypeError("The argument url is required.");1==e?a=arguments[0]:2==e?(a=arguments[0],c=arguments[1]):(a=arguments[0],d=arguments[1],c=arguments[2]),__m_Utils.checkRequired("url",a,"string"),d=d||{},d.url=a,d.type=b.GET,new b(d).send(c)},f.post=function(){var a,c,d={},e={},f=arguments.length;if(0==f)throw new TypeError("The argument url is required.");1==f?a=arguments[0]:2==f?(a=arguments[0],d=arguments[1]):3==f?(a=arguments[0],d=arguments[1],c=arguments[2]):(a=arguments[0],d=arguments[1],e=arguments[2],c=arguments[3]),__m_Utils.checkRequired("url",a,"string"),__m_Utils.checkRequired("data",d),e=e||{},e.url=a,new b(e).setType(b.POST).setData(d).send(c)},f.download=function(){var a,d,e,f={},g=arguments.length;if(0==g)throw new TypeError("The arguments url and file are required");if(1==g)throw new TypeError("The argument file is required");2==g?(a=arguments[0],d=arguments[1]):3==g?(a=arguments[0],d=arguments[1],e=arguments[2]):(a=arguments[0],d=arguments[1],f=arguments[2],e=arguments[3]),__m_Utils.checkRequired("url",a,"string"),__m_Utils.checkRequired("file",d,["string",c.File]),"string"==typeof d&&(d=new c.File(d)),f=f||{},f.url=a,new b(f).setType(b.GET).setDownloadFile(d).send(e)},$m.httpRequest=function(a){return new f.Request(a)},f.Basic=1,f.NTLM=2,c.addFeature(null,"HttpRequest",b),c.addFeature(e,"Http",f),c.exportHelperMethod("get","get","Http"),c.exportHelperMethod("post","post","Http"),c.exportHelperMethod("download","download","Http"),c.exportHelperProperty("BasicAuth","Basic","Http"),c.exportHelperProperty("NTLMAuth","NTLM","Http")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d="message",e={SMS_RESULT_CANCELLED:0,SMS_RESULT_SENT:1,SMS_RESULT_FAILED:2,MAIL_RESULT_CANCELED:0,MAIL_RESULT_SAVED:1,MAIL_RESULT_SENT:2,MAIL_RESULT_FAILED:3,sendMail:function(a,b,e,f,g){__m_Utils.checkRequired("to list",a,["object","string"]),__m_Utils.checkRequired("subject",b,"string"),__m_Utils.checkRequired("email body",e,"string"),"string"==typeof a&&(a=[a]),a=a||[],"string"==typeof f&&(f=[f]),f=f||[],"string"==typeof g&&(g=[g]),g=g||[],c.invoke(d,"sendMail",[a,b,e,f,g])},sendSms:function(a,b,e){__m_Utils.checkRequired("phonenumbers",a,["object","string"]),__m_Utils.checkRequired("message",b,"string"),"string"==typeof a&&(a=[a]),b=b||"","boolean"!=typeof e&&(e=!1),c.invoke(d,"sendText",[a,b,e])}};__m_Utils.inherit(e,Observable),b.addFeature(d,"Message",e),b.exportHelperMethod("email","sendMail","Message"),b.exportHelperMethod("sms","sendSms","Message")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d="network",e={NONE:0,WIFI:1,CELLULAR:2,OTHER:3,connected:!1,isConnected:function(){return this.connected},isHostReachable:function(a,b,e){__m_Utils.checkRequired("hostname",a,"string"),e=e||5e3,c.invoke(d,"isHostReachable",[a,e],b)},getActiveNetwork:function(a){c.invoke(d,"getActiveNetwork",[],a)},onConnect:function(a){this.connected=!0,this.fireEvent("connect",a)},onDisconnect:function(){this.connected=!1,this.fireEvent("disconnect")}};__m_Utils.inherit(e,Observable),b.addFeature(d,"Network",e),b.exportHelperProperty("NETWORK_NONE","NONE","Network"),b.exportHelperProperty("NETWORK_WIFI","WIFI","Network"),b.exportHelperProperty("NETWORK_CELL","CELLULAR","Network"),b.exportHelperProperty("NETWORK_OTHER","OTHER","Network"),b.exportHelperMethod("getNetwork","getActiveNetwork","Network"),b.exportHelperMethod("networkConnected","isConnected","Network"),b.exportHelperMethod("isHostReachable","isHostReachable","Network"),b.exportHelperEvent("onNetworkDisconnect","disconnect","Network"),b.exportHelperEvent("onNetworkConnect","connect","Network")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d="database",e=function(){function b(a,b){this.code=a,this.message=b+" Reason : "+this.toString()}function e(a,b){function c(){}c.prototype=b;var d=new c;return a.prototype=d,a.prototype.constructor=a,a.parent=b,a}function f(a){var c="";a&&a.message&&(c=a.message);var d=new b(b.UNKNOWN_ERR,c);return d}function g(a,b,c,d,e){this.command=a,this.args=b||[],this.name=c,this.successCallback=d,this.errorCallback=e,this.id=__m_Utils.generateGUID(),this.args.push(this.id)}function h(a){this.executeSql=function(b,c,d,e){a.executeSql(b,c,d,e)}}function i(a){a&&a.id&&(k[a.id]=a)}function j(a){a&&a.id&&delete k[a.id]}var k={},l=[];e(b,Error),b.SQL_ERR=100,b.UNKNOWN_ERR=1e3,b.DATABASE_ERR=2e3,b.VERSION_ERR=3e3,b.TOO_LARGE_ERR=4e3,b.QUOTA_ERR=5e3,b.SYNTAX_ERR=6e3,b.CONSTRAINT_ERR=7e3,b.TIMEOUT_ERR=8e3,b.prototype.toString=function(){switch(this.code){case b.UNKNOWN_ERR:return"Unknown error";case b.DATABASE_ERR:return"Database error";case b.VERSION_ERR:return"Version error";case b.TOO_LARGE_ERR:return"Too large error";case b.QUOTA_ERR:return"Quota error";case b.SYNTAX_ERR:return"Syntax error";case b.CONSTRAINT_ERR:return"Constraint error";case b.TIMEOUT_ERR:return"Timeout error";default:return"SQL error"}};var m=function(){this.rowsAffected=0,this.insertId=0,this.rows=null},n=function(a){this.command=a,this.sql=null,this.params=null,this.successCallback=null,this.errorCallback=null,this.id=__m_Utils.generateGUID()},o=function(a){this.database=a,this.successCallback=null,this.errorCallback=null,this.id=__m_Utils.generateGUID(),this.queryList=[],this.ignoreCommit=!1};o.prototype={validateSql:function(a,b,c,d){__m_Utils.checkRequired("sql",a,"string"),b&&__m_Utils.checkRequired(b,"function"),c&&__m_Utils.checkRequired(c,"function"),d&&__m_Utils.checkRequired("params",d,Array)},executeSql:function(a,b,c,d){try{this.validateSql(a,b,c,d)}catch(e){var g=f();return void this.invokeErrorCallback(c,g)}var h=new n(this);h.sql=a,h.params=d||[],h.successCallback=b,h.errorCallback=c,this.queryList.push(h)},executeQuery:function(a){if(!(a&&(a instanceof n||a instanceof g)))throw new TypeError("The argument query should be of type DBSQLQuery or DBSQLCommand");if(a instanceof n){i(a);var b=this.database.id,e={id:b,queryId:a.id,sql:a.sql,params:a.params};c.invoke(d,"executeQuery",[e],r)}if(a instanceof g){var f=a;if(i(f),!f||!f.name)throw new Error("Invalid command");c.invoke(d,f.name,f.args,r)}},begin:function(a){var b={context:this,callback:a};c.invoke(d,"beginTransaction",[this.database.id],b)},commit:function(a){var b={context:this,callback:a};c.invoke(d,"commit",[this.database.id],b)},rollback:function(a){var b={context:this,callback:a};c.invoke(d,"rollback",[this.database.id],b)},executeNextQuery:function(a){if(a&&j(a),this.queryList.length>0){var a=this.queryList.shift();if(a)try{this.executeQuery(a)}catch(b){b=f(b),this.invokeErrorCallback(a.errorCallback,b),this.executeNextQuery(a)}else this.executeNextQuery()}else this.completeTransaction()},queryComplete:function(a,b){try{var c=null;if(a instanceof n){var d=b.data;c=new m,c.insertId=d.insertId,c.rowsAffected=d.rowsAffected,__m_Utils.isArray(d.rows)&&(c.rows=d.rows);try{a.successCallback&&"function"==typeof a.successCallback&&(this.ignoreCommit?a.successCallback(c):a.successCallback(this,c))}catch(e){return void(this.ignoreCommit?this.executeNextQuery(a):this.processError(e))}}if(a instanceof g)try{if(a.successCallback&&"function"==typeof a.successCallback){var d=b.data;this.ignoreCommit?a.successCallback(d):a.successCallback(this,d)}}catch(e){return void(this.ignoreCommit?this.executeNextQuery(a):this.processError(e))}this.executeNextQuery(a)}catch(h){var i=f(h);this.queryFailed(a,i)}},queryFailed:function(a,b){try{try{a.errorCallback&&"function"==typeof a.errorCallback&&a.errorCallback(b)}catch(c){return void(this.ignoreCommit?t():this.processError(c))}this.executeNextQuery(a)}catch(c){}},completeTransaction:function(){try{if(0==this.queryList.length)try{if(this.ignoreCommit)return q(this.successCallback),void t();this.commit(function(a){if(a.error){var c=a.error.code,d=a.error.message,e=new b(c,d);this.rollback(function(a){try{a.error&&(c=a.error.code,d=a.error.message,e=new b(c,d))}catch(f){e=f,e=getSqlError(f)}this.invokeErrorCallback(this.errorCallback,e),t()})}else this.invokeSuccessCallback(this.successCallback),t()})}catch(a){throw a}}catch(c){c=getSqlError(c),this.invokeErrorCallback(this.errorCallback,c),t()}},processError:function(a){try{this.queryList.forEach(function(a){j(a)}),this.queryList=[];var c=a;this.rollback(function(a){if(a.error){var d=a.code,e=a.error.message,f=new b(d,e);c=f}this.invokeErrorCallback(this.errorCallback,c),t()})}catch(d){this.queryList=[];var e=f(d);this.invokeErrorCallback(this.errorCallback,e),t()}},process:function(){this.queryList.length>0?this.executeNextQuery():this.invokeSuccessCallback(this.successCallback)},invokeSuccessCallback:function(a,b){a&&(this.ignoreCommit?q(a,[b]):q(a,[this,b]))},invokeErrorCallback:function(a,b){a&&q(a,[b])},enqueue:function(a){if(a instanceof Array){var b=this.queryList;a.forEach(function(a){(a instanceof g||a instanceof n)&&b.push(a)})}}};var p=function(){this.id=-1};p.prototype.transaction=function(a,b,c){var d=new o(this);if(d.successCallback=b,d.errorCallback=c,a)try{var e=new h(d);a(e),s(d)}catch(g){g=f(g),q(c,[g])}},p.prototype.executeSql=function(a,b,c,d){var e=new o(this);try{e.ignoreCommit=!0,e.validateSql(a,b,c,d);var g=new n(e);g.sql=a,g.params=d||[],g.successCallback=b,g.errorCallback=c,e.enqueue([g]),s(e)}catch(h){h=f(h),q(c,[h])}};var q=function(b,c,d){if(__m_Utils.isOfType(b,"function"))try{d?b.apply(d,c):b.apply(a,c)}catch(e){}},r=function(a){if(a){var c=a.result.queryId,d=k[c];if(d){var e=d.command;if(e)if(a.error){var f=a.code,g=a.error.message,h=new b(f,g);e.queryFailed(d,h)}else e.queryComplete(d,a.result)}}},s=function(a){if(a)if(l.length>0)l.push(a);else if(a.queryList.length>0){l.push(a);try{a.ignoreCommit?a.process():a.begin(function(c){if(c.error){var d=c.code,e=c.error.message,f=new b(d,e);q(a.errorCallback,[f]),t()}else a.process()})}catch(c){var d=-1;l.forEach(function(b,c){b.id===a.id&&(d=c)}),d>-1&&l.splice(d,1);var e=f(c);q(a.errorCallback,[e]),t()}}else q(a.successCallback),t()},t=function(){l.shift();var a=null;if(l.length>0)try{a=l[0],a&&a.queryList.length>0?a.ignoreCommit?a.process():a.begin(function(c){if(c.error){var d=c.code,e=c.error.message,f=new b(d,e);q(a.errorCallback,[f]),t()}else a.process()}):(a&&q(a.successCallback),t())}catch(c){if(a){var d=f(c);q(a.errorCallback,[d])}t()}},u=1,v=2,w=3,x=function(a,e,f,g,h){function i(a){if(a.error){var c=a.error.code,d=a.error.message,f=new b(c,d);e({error:f,database:null})}if(a.result){var g=a.result,h=new p;h.id=g,e({error:null,database:h})}}var j=this.DefaultLevel;if(arguments.length<2)throw new TypeError("The argument name and callback are required");2===arguments.length&&(__m_Utils.checkRequired("name",a,"string"),__m_Utils.checkRequired("callback",e,"function")),3===arguments.length&&(__m_Utils.checkRequired("name",a,"string"),__m_Utils.checkRequired("callback",e,"function"),__m_Utils.checkRequired("version",f,"number")),4===arguments.length&&(__m_Utils.checkRequired("name",a,"string"),__m_Utils.checkRequired("callback",e,"function"),__m_Utils.checkRequired("version",f,"number"),__m_Utils.checkRequired("password",g,"string")),5===arguments.length&&(__m_Utils.checkRequired("name",a,"string"),__m_Utils.checkRequired("callback",e,"function"),__m_Utils.checkRequired("version",f,"number"),__m_Utils.checkRequired("password",g,"string"),__m_Utils.checkRequired("level",h,"number"),w>=h&&h>=this.DefaultLevel&&(j=h)),f=f||1,c.invoke(d,"openDatabase",[a,j,f,g],i)};return{openDatabase:x,DefaultLevel:u,APPLICATION_LEVEL:u,STORAGE_LEVEL:v}}();b.addFeature(d,"DatabaseShell",e),b.exportHelperMethod("openDatabase","openDatabase","DatabaseShell")}(window),function(a){var b=a.__mowbly__,c=b.Bridge,d="imagegallery",e={showAsGallery:function(a,b){__m_Utils.checkRequired("options",a,"object"),__m_Utils.checkRequired("title",a.title,"string"),__m_Utils.isArray(a.images)||(a.images=images),__m_Utils.isOfType(a.index,"number")||(a.index=0),a.buttonLabel||(a.buttonLabel="Done"),a.loadingMsg||(a.loadingMsg="Loading image..."),a.errorMsg||(a.errorMsg="Error loading image"),c.invoke(d,"showAsGallery",[a],b)}};b.addFeature(d,"ImageGallery",e),b.exportHelperMethod("showAsGallery","showAsGallery","ImageGallery")}(window),$m.openGoogleMaps=function(a){var b;$m.isAndroid()?b="http://maps.google.com/maps":$m.isIOS()?b="comgooglemaps://":$m.isWindowsPhone()||$m.isBlackberry();var c={scheme:b};Framework.openExternal(c,a)},function(a){var b=a.__mowbly__,c=b.Bridge,d="sms",e={smsBackground:function(a,b,e,f){__m_Utils.checkRequired("Sms To",a,"string"),__m_Utils.checkRequired("Sms Text",b,"string"),__m_Utils.checkRequired("Sms From",e,"string"),c.invoke(d,"smsBackground",[a,b,e],f)}};b.addFeature(d,"Sms",e),b.exportHelperMethod("sendBgSms","smsBackground","Sms")}(window),function(){$m.bridgeVersion=function(){return"4.0.0"}}(window);